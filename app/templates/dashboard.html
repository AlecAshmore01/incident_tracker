{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Analytics Dashboard</h2>
  </div>

  <div class="row gy-4">
    <div class="col-md-6">
      <div class="chart-container">
        <h4>Incidents by Status</h4>
        <canvas id="statusChart"></canvas>
      </div>
    </div>
    <div class="col-md-6">
      <div class="chart-container">
        <h4>Top Categories</h4>
        <canvas id="categoryChart"></canvas>
      </div>
    </div>
    <div class="col-12">
      <div class="chart-container">
        <h4>Incidents Over Time (Last 30 Days)</h4>
        <canvas id="timeChart"></canvas>
      </div>
    </div>
    <div class="col-md-6">
      <div class="stat-card">
        <div class="d-flex align-items-center">
          <div class="flex-grow-1">
            <h3 id="avgTime">â€”</h3>
            <p>Average Resolution Time</p>
            <small class="text-muted">Based on closed incidents only</small>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
